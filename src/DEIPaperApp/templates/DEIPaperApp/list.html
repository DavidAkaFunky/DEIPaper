{% extends "DEIPaperApp/base.html" %}
{% block content %}
{% load static %}
{% load mathfilters %}
<title>DEI Paper</title>
<div class="padding">
   <div class="row justify-content-between">
      <ul class="col-sm-1 pagination table-entry-title">
         Page
         {% for i in pages %}
            <li class="page-item"><a class="btn btn-light" href="{% url "list_papers" lines|mul:i|sub:lines lines%}" >{{i}}</a></li>
         {% endfor %}
         {% if page > 5 %}
            <li class="page-item"><a class="btn btn-light" role="button"><b>...</b></a></li>
         {% endif %}
            <li class="page-item active"><a class="btn btn-dark" role="button"><b>{{page}}</b></a></li>
         {% if has_next_page %}
            <li class="page-item"><a href="{% url "list_papers" offset|add:lines lines %}" class="btn btn-light" role="button"><b> {{page|add:"1"}} </b></a></li>
         {% endif %}
      </ul>
      <ul class="col-sm-1 pagination table-entry-title flex-row-reverse">
         Entries/page
         {% for size in size_options %}
            {% if size == lines %}
               <li class="page-item"><a class="btn btn-dark" role="button">{{size}}</a></li>
            {% else %}
               <li class="page-item"><a href="{% url "list_papers" offset size %}" class="btn btn-light" role="button">{{size}}</a></li>
            {% endif %}
         {% endfor %}
      </ul>
   </div>
   <input class="form-control navbar-fontsize" id="search-bar" type="text" placeholder="Search by ID/name/author">
   <div class="">
      <table class="table table-responsive  table-hover table-borderless table-striped">
         <thead>
            <tr class="table-header">
               <th>ID</th>
               <th>Title</th>
               <th>Authors</th>
            </tr>
         </thead>
         <tbody id="paper-table">
            {% for paper in paper_list %}
               <tr class="paper-info">
                  <td class="table-entry"> {{paper.id}}</td>
                  <td class="table-entry-title"> <a href="{% url "show_paper" paper.id %}"> <b>{{paper.title}}</b> </a> </td>
                  <td class="table-entry"> {{paper.authors}}</td>
                  <td>
                     <a href="{% url "update_paper" paper.id %}"><img src="{% static "img/edit.png" %}" class="table-button mb-2"></a>
                     <a href="{% url "delete_paper" paper.id %}" onClick="confirlgeletion()"><img src="{% static "img/delete.png" %}" class="table-button"></a>
                  </td>
               </tr>
            {% endfor %}
         </tbody>
      </table>
   </div>
</div>

<script LANGUAGE="JavaScript">
   $(document).ready(function(){
      $("#search-bar").on("keyup", function() {
         var value = $(this).val().toLowerCase();
         $("#paper-table tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
         });
      });
   });
   function confirlgeletion(){
      return confirm("Do you really want to delete this paper from the system?\nThis action is irreversible!");
   }
</script>

{% endblock %}